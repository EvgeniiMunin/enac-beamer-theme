% Enac Beamer Theme 2018 by Gautier Hattenberger <gautier.hattenberger@enac.fr>
% licensed under CC-BY-4.0
% 

\RequirePackage{calc}
\RequirePackage{tikz}

\def\Enac@backgroundimage{fond-Enac-2017.pdf}
\DeclareOptionBeamer{backgroundimage}{\def\Enac@backgroundimage{#1}}

\ProcessOptionsBeamer

\mode<presentation>

\pgfdeclareimage[interpolate=true, height=\the\paperheight, width=\the\paperwidth]{backgroundImage}{\Enac@backgroundimage}

\setbeamertemplate{background}{
  \begin{tikzpicture}
    \useasboundingbox (0,0) rectangle (\the\paperwidth, \the\paperheight) ;
    \pgftext[at=\pgfpoint{0cm}{0cm},left,base]{\pgfuseimage{backgroundImage}} ;
  \end{tikzpicture}
}

\defbeamertemplate*{frametitle}{enac theme}[1][left]
{
  \begin{beamercolorbox}[sep=0.7cm,#1,wd=\the\paperwidth,leftskip=1.3cm]{frametitle}
    \usebeamerfont{my frametitle}%
    \vbox{}\vskip-0.5ex%
    \strut\insertframetitle\strut\par%
  \end{beamercolorbox}%
  \vspace*{-1cm}
}

\beamertemplatenavigationsymbolsempty

\defbeamertemplate*{footline}{infolines theme}
{
  \leavevmode%
  \hbox{%
    \begin{beamercolorbox}[wd=0.8\paperwidth,ht=2.25ex,dp=1ex,left]{foot}%
      \hspace*{1ex}\insertshorttitle
      \ifx\insertsection\@empty\else\hspace*{1ex}/\hspace*{1ex}\insertsection\fi
      \ifx\insertsubsection\@empty\else\hspace*{1ex}/\hspace*{1ex}\insertsubsection\fi
    \end{beamercolorbox}
    \begin{beamercolorbox}[wd=0.18\paperwidth,ht=2.25ex,dp=1ex,right]{foot}%
      \insertframenumber{} \hspace*{1ex}
    \end{beamercolorbox}
  }%
}
